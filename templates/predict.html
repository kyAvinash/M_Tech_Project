{% from "showlinks.html" import showlinks %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Diabetes Prediction Form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='datacollection.css') }}"
    />
  </head>
  <body>
    <div class="container parent">
      <div class="header">{{ showlinks() }}</div>

      <div class="form-container">
        <div class="form-header text-center">
          <h2>
            <i class="fas fa-clipboard-list"></i> Diabetes Risk Assessment
          </h2>
          <p class="subtitle">
            Based on our two-stage machine learning framework
          </p>
        </div>

        <form
          class="prediction-form"
          action="{{ url_for('predict') }}"
          method="post"
        >
          <!-- Personal Information -->
          <div class="form-section">
            <h4><i class="fas fa-user"></i> Personal Information</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="username" class="form-label">Full Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="username"
                  name="username"
                  placeholder="Your name"
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label for="age" class="form-label">Age</label>
                <input
                  type="number"
                  class="form-control"
                  id="age"
                  name="age"
                  placeholder="Age in years"
                  min="10"
                  max="100"
                  required
                />
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="height" class="form-label">Height (cm)</label>
                <input
                  type="number"
                  class="form-control"
                  id="height"
                  name="height"
                  placeholder="Height in centimeters"
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label for="weight" class="form-label">Weight (kg)</label>
                <input
                  type="number"
                  class="form-control"
                  id="weight"
                  name="weight"
                  placeholder="Weight in kilograms"
                  required
                />
              </div>
            </div>
          </div>

          <!-- Health Metrics -->
          <div class="form-section">
            <h4><i class="fas fa-heartbeat"></i> Health Metrics</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="pregnancies" class="form-label"
                  >Number of Pregnancies</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="pregnancies"
                  name="pregnancies"
                  placeholder="0 if not applicable"
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label for="familyhistory" class="form-label"
                  >Family History of Diabetes</label
                >
                <select
                  class="form-select"
                  id="familyhistory"
                  name="familyhistory"
                >
                  <option value="0">No</option>
                  <option value="1">Yes</option>
                </select>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="glucose" class="form-label"
                  >Glucose Level (mg/dL)</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="glucose"
                  name="glucose"
                  placeholder="0-200"
                  min="0"
                  max="200"
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label for="bloodpressure" class="form-label"
                  >Blood Pressure (mmHg)</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="bloodpressure"
                  name="bloodpressure"
                  placeholder="0-122"
                  min="0"
                  max="122"
                  required
                />
              </div>
            </div>

            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="skinthickness" class="form-label"
                  >Skin Thickness (mm)</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="skinthickness"
                  name="skinthickness"
                  placeholder="0-99"
                  min="0"
                  max="99"
                  required
                />
              </div>
              <div class="col-md-4 mb-3">
                <label for="insulin" class="form-label"
                  >Insulin Level (IU/mL)</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="insulin"
                  name="insulin"
                  placeholder="0-846"
                  min="0"
                  max="846"
                  required
                />
              </div>
              <div class="col-md-4 mb-3">
                <label for="bmi" class="form-label">BMI (kg/mÂ²)</label>
                <input
                  type="number"
                  class="form-control"
                  id="bmi"
                  name="bmi"
                  placeholder="0.1-67.99"
                  min="0.1"
                  max="67.99"
                  step="0.01"
                  required
                />
              </div>
            </div>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="dpf" class="form-label"
                  >Diabetes Pedigree Function</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="dpf"
                  name="dpf"
                  placeholder="0.078-2.42"
                  min="0.078"
                  max="2.42"
                  step="0.001"
                  required
                />
              </div>
            </div>
          </div>

          <!-- Lifestyle -->
          <div class="form-section">
            <h4><i class="fas fa-utensils"></i> Lifestyle Factors</h4>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="mealsperday" class="form-label"
                  >Meals Per Day</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="mealsperday"
                  name="mealsperday"
                  placeholder="Number of meals"
                  required
                />
              </div>
              <div class="col-md-6 mb-3">
                <label for="totalexersisehours" class="form-label"
                  >Daily Exercise (hours)</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="totalexersisehours"
                  name="totalexersisehours"
                  placeholder="Exercise hours per day"
                  required
                />
              </div>
            </div>

            <label class="form-label">Top 5 Most Frequent Meals</label>
            <div class="row">
              <div class="col mb-2">
                <input
                  type="text"
                  class="form-control"
                  name="meal1"
                  placeholder="Meal 1"
                  required
                />
              </div>
              <div class="col mb-2">
                <input
                  type="text"
                  class="form-control"
                  name="meal2"
                  placeholder="Meal 2"
                  required
                />
              </div>
              <div class="col mb-2">
                <input
                  type="text"
                  class="form-control"
                  name="meal3"
                  placeholder="Meal 3"
                  required
                />
              </div>
              <div class="col mb-2">
                <input
                  type="text"
                  class="form-control"
                  name="meal4"
                  placeholder="Meal 4"
                  required
                />
              </div>
              <div class="col mb-2">
                <input
                  type="text"
                  class="form-control"
                  name="meal5"
                  placeholder="Meal 5"
                  required
                />
              </div>
            </div>
          </div>

          <!-- Submit -->
          <div class="form-footer text-center mt-4">
            <button type="submit" class="btn btn-primary btn-lg">
              <i class="fas fa-chart-line"></i> Assess Diabetes Risk
            </button>
            <p class="mt-3 text-muted">
              This assessment uses our Random Forest model (ROC-AUC: 0.815)
            </p>
          </div>
        </form>

        <!-- Output Section: Displayed after POST -->
        {% if prediction_result %}
        <div class="alert alert-info mt-5">
          <h4><strong>Prediction Result:</strong> {{ prediction_result }}</h4>
          <p>{{ recommendation }}</p>
          <hr />
          <p><strong>Confidence:</strong> {{ probability }}%</p>
          <p><strong>Name:</strong> {{ username }}</p>
          <p><strong>Glucose:</strong> {{ glucose }} mg/dL</p>
          <p><strong>Blood Pressure:</strong> {{ bloodpressure }} mmHg</p>
          <p><strong>BMI:</strong> {{ bmi }}</p>
          <p><strong>Age:</strong> {{ age }}</p>
        </div>
        {% endif %}
      </div>

      <div class="footer text-center mt-4 mb-3">
        <p>
          Truba Institute of Engineering & Information Technology<br />
          <small>Two-Stage Diabetes Prediction Framework Research</small>
        </p>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
